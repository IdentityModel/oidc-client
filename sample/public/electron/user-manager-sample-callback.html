<!DOCTYPE html>
<html>
    <head>
        <title>oidc-client test</title>
        <link rel='stylesheet' href='app.css'>
    </head>
    <body>
        <div>
            <a href="user-manager-sample.html">back to sample</a>
        </div>
        <pre id='out'></pre>
        <script src='log.js'></script>
        <script src='oidc-client.js'></script>
        <script>
            Oidc.Log.logger = console;
            Oidc.Log.logLevel = Oidc.Log.INFO;

var baseUrl =  'http://localhost:5000/electron/';

var settings = {
    authority: 'http://localhost:5000/oidc',
    client_id: 'js.tokenmanager',
    redirect_uri: baseUrl+'user-manager-sample.html',
    post_logout_redirect_uri: baseUrl+'user-manager-sample.html',
    response_type: 'id_token token',
    scope: 'openid email roles',
    
    popup_redirect_uri: baseUrl+'user-manager-sample-popup.html',
    
    silent_redirect_uri: baseUrl+'user-manager-sample-silent.html',
    automaticSilentRenew:true,
    //silentRequestTimeout:10000,

    filterProtocolClaims: true,
    loadUserInfo: true
};

    settings.popupNavigator = new Oidc.ElectronPopupNavigator();
    settings.iframeNavigator = new Oidc.ElectronIFrameNavigator();

        new Oidc.UserManager(settings).signinRedirectCallback().then(function(user) {
                log("signin response success", user);
            }).catch(function(err) {
                log(err);
            });
        </script>
    </body>
</html>
